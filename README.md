## Today's Weather
<div align="center">

`Hanoi, Vietnam - 10/10/2023`

<img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"/>

Overcast

</div>


<table>
    <tr>
        <th>Hour</th>
        <td>00:00</td><td>01:00</td><td>02:00</td><td>03:00</td><td>04:00</td><td>05:00</td><td>06:00</td><td>07:00</td><td>08:00</td><td>09:00</td><td>10:00</td><td>11:00</td><td>12:00</td><td>13:00</td><td>14:00</td><td>15:00</td><td>16:00</td><td>17:00</td><td>18:00</td><td>19:00</td><td>20:00</td><td>21:00</td><td>22:00</td><td>23:00</td>
    </tr>
    <tr>
        <th>Weather</th>
        <td><img src="https://cdn.weatherapi.com/weather/64x64/night/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/119.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/116.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/116.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/116.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/116.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/116.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/116.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/119.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/113.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/176.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/122.png"></img></td><td><img src="https://cdn.weatherapi.com/weather/64x64/night/122.png"></img></td>
    </tr>
    <tr>
        <th>Condition</th>
        <td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Cloudy</td><td width="200px">Partly cloudy</td><td width="200px">Partly cloudy</td><td width="200px">Partly cloudy</td><td width="200px">Partly cloudy</td><td width="200px">Partly cloudy</td><td width="200px">Partly cloudy</td><td width="200px">Cloudy</td><td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Sunny</td><td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Patchy rain possible</td><td width="200px">Overcast</td><td width="200px">Overcast</td><td width="200px">Overcast</td>
    </tr>
    <tr>
        <th>Temperature</th>
        <td>25.5 °C</td><td>25.4 °C</td><td>25 °C</td><td>24.7 °C</td><td>24.5 °C</td><td>24.4 °C</td><td>24.2 °C</td><td>24.2 °C</td><td>24.6 °C</td><td>25 °C</td><td>25.6 °C</td><td>25.4 °C</td><td>24.8 °C</td><td>25.1 °C</td><td>30 °C</td><td>24.1 °C</td><td>23.5 °C</td><td>23.4 °C</td><td>23.1 °C</td><td>22.9 °C</td><td>22.9 °C</td><td>22.8 °C</td><td>22.7 °C</td><td>22.6 °C</td>
    </tr>
    <tr>
        <th>Wind</th>
        <td>11.2 kph</td><td>13 kph</td><td>13.3 kph</td><td>12.2 kph</td><td>12.6 kph</td><td>13.3 kph</td><td>12.6 kph</td><td>12.2 kph</td><td>13.7 kph</td><td>15.5 kph</td><td>17.3 kph</td><td>17.6 kph</td><td>16.6 kph</td><td>19.1 kph</td><td>13 kph</td><td>15.8 kph</td><td>14.4 kph</td><td>15.1 kph</td><td>15.8 kph</td><td>15.8 kph</td><td>15.1 kph</td><td>14 kph</td><td>13.3 kph</td><td>13 kph</td>
    </tr>
</table>


## Weather For Next 3 days


<table>
    <tr>
        <th>Date</th>
        <td>10/10/2023</td><td>11/10/2023</td><td>12/10/2023</td>
    </tr>
    <tr>
        <th>Weather</th>
        <td><img src="https://cdn.weatherapi.com/weather/64x64/day/122.png"/></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/176.png"/></td><td><img src="https://cdn.weatherapi.com/weather/64x64/day/176.png"/></td>
    </tr>
    <tr>
        <th>Condition</th>
        <td width="200px">Overcast</td><td width="200px">Patchy rain possible</td><td width="200px">Patchy rain possible</td>
    </tr>
    <tr>
        <th>Temperature</th>
        <td>22.6 -  25.6 °C</td><td>20.3 -  22.2 °C</td><td>20.2 -  23.8 °C</td>
    </tr>
    <tr>
        <th>Wind</th>
        <td>19.1 kph</td><td>14.4 kph</td><td>11.5 kph</td>
    </tr>
</table>


*Updated at: 2023-10-10T07:20:06Z*

## GitHub Actions: Embed up-to-date Weather in your README
<details>
<summary>
    View
</summary>

You can easily embed tables in your README.md using GitHub Actions by following these simple steps:

**Step 1:** In your repository, create a file named `README.md.template`.

**Step 2:** Write anything you want within the `README.md.template` file.

**Step 3:** Embed one of the following entities within your `README.md.template`:

- **Today's Weather Table:**
```shell
{{ template "hourly-table" $.TodayWeather.HourlyWeathers }}
```

- **Daily Weather Table:**
```shell
{{ template "daily-table" .Weathers }}
```

- **Updated at:**
```shell
{{ formatTime .UpdatedAt }}
```

If you are familiar with Go templates, you have access to the `root` variable, which includes the following fields:

- `Weathers`: An array of daily Weather. You can view the Weather struct definition in [model/weather.go](model/weather.go).
- `UpdatedAt`: This field contains the timestamp in the format of `time.Date`.

**Step 4**: Register Github Action
- Create a file `.github/workflows/update-weather.yml` in your repository.
```yml
name: "Cronjob"
on:
schedule:
- cron: '15 * * * *'

jobs:
    update-weather:
        permissions: write-all
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
            - name: Generate README
              uses: huantt/weather-forecast@v1.0.5
              with:
                city: HaNoi
                days: 7
                weather-api-key: ${{ secrets.WEATHER_API_KEY }}
                template-file: 'README.md.template'
                out-file: 'README.md'
            - name: Commit
              run: |
                if git diff --exit-code; then
                  echo "No changes to commit."
                  exit 0
                else
                  git config user.name github-actions
                  git config user.email github-actions@github.com
                  git add .
                  git commit -m "update"
                  git push origin main
                fi
```
- Update some variable in this file:
    - city: The city that you want to forecast weather
    - days: number of forecast days
    - template-file: Path to the above template file. Eg. `template/README.md.template`
    - out-file: your README.md file name
    - weather-api-key:
        - Register free API key in [https://weatherapi.com](https://weatherapi.com)
        - Setup secrets with name `WEATHER_API_KEY` in `Your repo > settings > Secrets and variables > Actions > New repository secret`

**Step 5**: Commit your change, then Github actions will run as your specificed cron to update Weather into your README.md file
</details>


## Usage
<details>
<summary>View</summary>

#### Install
```shell
go install https://github.com/huantt/weather-forecast
```

#### Run

```shell
Usage:
weather-forecast update-weather [flags]

Flags:
--city string              City
--days int                 Days of forecast (default 7)
-h, --help                     help for update-weather
-o, --out-file string          Output file path
-f, --template-file string     Readme template file path
-k, --weather-api-key string   weatherapi.com API key

```

**Sample**
```shell
weather-forecast update-weather \
--days=7 \
--weather-api-key="$WEATHER_API_KEY" \
--template-file='template/README.md.template' \
--city=HaNoi \
--out-file='README.md'
```

### Docker
```shell
docker build -t weather-forecast .
```

```shell
docker run --rm \
-v ./:/app/data \
weather-forecast \
--weather-api-key='XXXX' \
--city=HaNoi \
--out-file=data/README.md \
--template-file=data/README.md.template
```

</details>
